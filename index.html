<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <script src="http://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
	<script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.js"></script>
    <script src="http://dimplejs.org/dist/dimple.v2.3.0.min.js"></script>
    <style>
      .dimple-summer.dimple-bubble {
        fill: #CB4335;
      }

      .dimple-winter.dimple-bubble {
        fill: #2E86C1;
      }

      h1 {
        text-align: center;
        text-shadow: 2px 2px 5px grey;
      }
      
      .p1{
        font-family: "Times New Roman", Times, serif;
        color: black;
        text-align: justify;
      }

      body{
        margin-top: 50px;
        margin-left: 70px;
        margin-bottom: 100px;
        margin-right: 200px;
        background-color: white;
      }

      #rings {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .box1 {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
      }
    </style>
    <script>
    	function country_participation(data) {
     	   "use strict";
        	var margin = 150,
            width = 1000 - margin,
            height = 350 - margin;

            var svg = dimple.newSvg("#div1", 
            	width + margin, 
            	height + margin);
        	d3.select("svg")
            	.selectAll("circle")
            	.data(data)
            	.enter()
            	.append("circle");

          	var myChart = new dimple.chart(svg, data);
          	var x = myChart.addTimeAxis("x", "Year"); 
          	var y = myChart.addMeasureAxis("y", "Number_of_countries");
          	x.dateParseFormat = "%Y";
          	x.tickFormat = "%Y";
          	x.timeInterval = 4;
          	y.title="No. of Countries participated";
          	myChart.addSeries("Season", dimple.plot.line);
          	myChart.assignColor("Winter", '#2E86C1');
          	myChart.assignColor("Summer", '#CB4335');
          	myChart.addSeries("Season", dimple.plot.scatter);
          	myChart.addLegend(20, 42, 500, 40, "right");
          	myChart.draw();
          
          	svg.append("text")
             	.attr("x", -240)
            	.attr("y", 240)
            	.attr("transform", "rotate(-90)" )
             	.style("text-anchor", "middle")
            	.style("font-size", "25px")
            	.style("fill", 'black')
            	.style("font-family", "sans-serif")
            	.style("opacity", 0.6)
            	.style("pointer-events", "none")
            	.style("text-shadow", "2px 2px 5px grey")
            	.text("World War I");

            svg.append("text")
             	.attr("x", -240)
            	.attr("y", 410)
            	.attr("transform", "rotate(-90)" )
             	.style("text-anchor", "middle")
            	.style("font-size", "25px")
            	.style("fill", 'black')
            	.style("font-family", "sans-serif")
            	.style("opacity", 0.6)
            	.style("pointer-events", "none")
            	.style("text-shadow", "2px 2px 5px grey")
            	.text("World War II");

            svg.append("text")
             	.attr("x", 697)
            	.attr("y", 209)
            	.attr("transform", "rotate(0)" )
             	.style("text-anchor", "middle")
            	.style("font-size", "12px")
            	.style("fill", 'black')
            	.style("font-family", "sans-serif")
            	.style("opacity", 0.6)
            	.style("pointer-events", "none")
            	.text("1980 boycott");

            svg.append("text")
             	.attr("x", 450)
             	.attr("y", 25)
             	.style("text-anchor", "middle")
             	.style("font-family", "sans-serif")
             	.style("font-weight", "bold")
             	.text("Number of countries participated in Olympics");
        };
        function summer_athletes_draw(data) {
        	"use strict";
          	var margin = 150,
              	width = 1000 - margin,
              	height = 350 - margin;
          	var svg2 = dimple.newSvg("#div2", 
            	width + margin, 
            	height + margin);
          	d3.select(".c2")
            	.selectAll("circle")
            	.data(data)
            	.enter()
            	.append("circle");
            var myChart = new dimple.chart(svg2, data);
          	var x = myChart.addTimeAxis("x", "Year"); 
          	var y = myChart.addMeasureAxis("y", "number_of_athletes");
          	x.dateParseFormat = "%Y";
          	x.tickFormat = "%Y";
          	x.timeInterval = 4;
          	y.title="No. of Athletes participated";
          	myChart.addSeries("Sex",  dimple.plot.line);
          	myChart.assignColor("M", '#2E86C1');
          	myChart.assignColor("F", '#CB4335');
          	myChart.addSeries("Sex", dimple.plot.scatter);
          	myChart.addLegend(20, 44, 480, 40, "right");
          	myChart.draw();
          	svg2.append("text")
             	.attr("x", 450)
             	.attr("y", 25)
             	.style("text-anchor", "middle")
             	.style("font-family", "sans-serif")
             	.style("font-weight", "bold")
             	.text("Number of athletes participated in summer Olympics");
        };

        function winter_athletes_draw(data) {
          	"use strict";
          	var margin = 150,
              	width = 1000 - margin,
              	height = 350 - margin;

          	var svg3 = dimple.newSvg("#div3", 
            	width + margin, 
            	height + margin);
          	d3.select(".c3")
            	.selectAll("circle")
            	.data(data)
            	.enter()
            	.append("circle");
            var myChart = new dimple.chart(svg3, data);
          	var x = myChart.addTimeAxis("x", "Year"); 
          	var y = myChart.addMeasureAxis("y", "number_of_athletes");
          	x.dateParseFormat = "%Y";
          	x.tickFormat = "%Y";
          	x.timeInterval = 4;
          	y.title="No. of Athletes participated";
          	myChart.addSeries("Sex", dimple.plot.line);
          	myChart.assignColor("M", '#2E86C1');
          	myChart.assignColor("F", '#CB4335');
          	myChart.addSeries("Sex", dimple.plot.scatter);
          	myChart.draw();
          	svg3.append("text")
             	.attr("x", 450)
             	.attr("y", 25)
             	.style("text-anchor", "middle")
             	.style("font-family", "sans-serif")
             	.style("font-weight", "bold")
             	.text("Number of athletes participated in winter Olympics");
        };

        function no_medal_map(data) {
        	"use strict";
          	var margin = 50,
              	width = 960,
              	height = 600;

          	var svg = dimple.newSvg("#map1", 
            	width, 
            	height);
          	var path = d3.geoPath();
          	var projection = d3.geoNaturalEarth()
    			.scale(width / 2 / Math.PI)
    			.translate([width / 2, height / 2])
			var path = d3.geoPath()
    			.projection(projection);
    		var data = d3.map();
			var colorScheme = ["#ffffff", "#cccccc", "#636363"];
			var colorScale = d3.scaleThreshold()
    			.domain([-1, 0])
    			.range(colorScheme);
			var g = svg.append("g")
    			.attr("class", "legendThreshold")
    			.attr("transform", "translate(20,20)");
			g.append("text")
    			.attr("class", "caption")
    			.attr("x", 0)
    			.attr("y", -2);
			var labels = ['','Medals','No medals'];
			var legend = d3.legendColor()
    			.labels(function (d) { return labels[d.i]; })
    			.shapePadding(4)
    			.scale(colorScale);
			svg.select(".legendThreshold")
    			.call(legend);
    		svg.append("text")
             	.attr("x", 450)
             	.attr("y", 25)
             	.style("text-anchor", "middle")
             	.style("font-family", "sans-serif")
             	.style("font-weight", "bold")
             	.text("Countries that never won medals in Olympics");
    		d3.queue()
    			.defer(d3.json, "http://enjalot.github.io/wwsd/data/world/world-110m.geojson")
    			.defer(d3.csv, "data/no_medal.csv", function(d) { data.set(d.region, d.number_of_medals); })
    			.await(ready);

			function ready(error, topo) {
    			if (error) throw error;

				svg.append("g")
					.attr("class", "countries")
					.selectAll("path")
					.data(topo.features)
					.enter().append("path")
				    .attr("fill", function (d){
				        d.total = data.get(d.properties.name) || -1;
				        return colorScale(d.total);
				    })
				    .attr("d", path);
				}
    	};
    	function no_gold_men_map(data) {
        	"use strict";
          	var margin = 50,
              	width = 960,
              	height = 600;

          	var svg = dimple.newSvg("#map2", 
            	width, 
            	height);
          	var path = d3.geoPath();
          	var projection = d3.geoNaturalEarth()
    			.scale(width / 2 / Math.PI)
    			.translate([width / 2, height / 2])
			var path = d3.geoPath()
    			.projection(projection);
    		var data = d3.map();
			var colorScheme = ["#ffffff", "#cccccc", "#636363"];
			var colorScale = d3.scaleThreshold()
    			.domain([-1, 0])
    			.range(colorScheme);

			var g = svg.append("g")
    			.attr("class", "legendThreshold")
    			.attr("transform", "translate(20,20)");
			g.append("text")
    			.attr("class", "caption")
    			.attr("x", 0)
    			.attr("y", -2);
			var labels = ['','Other countries','No Men have won gold medal'];
			var legend = d3.legendColor()
    			.labels(function (d) { return labels[d.i]; })
    			.shapePadding(4)
    			.scale(colorScale);
			svg.select(".legendThreshold")
    			.call(legend);
    		svg.append("text")
             	.attr("x", 450)
             	.attr("y", 25)
             	.style("text-anchor", "middle")
             	.style("font-family", "sans-serif")
             	.style("font-weight", "bold")
             	.text("Countries where men never won gold medal but women have");
    		d3.queue()
    			.defer(d3.json, "http://enjalot.github.io/wwsd/data/world/world-110m.geojson")
    			.defer(d3.csv, "data/no_men_gold.csv", function(d) { data.set(d.region, d.Gold_M); })
    			.await(ready);

			function ready(error, topo) {
    			if (error) throw error;

				svg.append("g")
					.attr("class", "countries")
					.selectAll("path")
					.data(topo.features)
					.enter().append("path")
				    .attr("fill", function (d){
				        d.total = data.get(d.properties.name) || -1;
				        return colorScale(d.total);
				    })
				    .attr("d", path);
				}
    };
    function no_gold_women_map(data) {
        	"use strict";
          	var margin = 50,
              	width = 960,
              	height = 600;

          	var svg = dimple.newSvg("#map3", 
            	width, 
            	height);
          	var path = d3.geoPath();
          	var projection = d3.geoNaturalEarth()
    			.scale(width / 2 / Math.PI)
    			.translate([width / 2, height / 2])
			var path = d3.geoPath()
    			.projection(projection);
    		var data = d3.map();
			var colorScheme = ["#ffffff", "#cccccc", "#636363"];
			var colorScale = d3.scaleThreshold()
    			.domain([-1, 0])
    			.range(colorScheme);

			var g = svg.append("g")
    			.attr("class", "legendThreshold")
    			.attr("transform", "translate(20,20)");
			g.append("text")
    			.attr("class", "caption")
    			.attr("x", 0)
    			.attr("y", -2);
			var labels = ['', 'Other countries', 'No Women have won gold medal'];
			var legend = d3.legendColor()
    			.labels(function (d) { return labels[d.i]; })
    			.shapePadding(4)
    			.scale(colorScale);
			svg.select(".legendThreshold")
    			.call(legend);
    		svg.append("text")
             	.attr("x", 450)
             	.attr("y", 25)
             	.style("text-anchor", "middle")
             	.style("font-family", "sans-serif")
             	.style("font-weight", "bold")
             	.text("Countries where women never won gold medal but men have");
    		d3.queue()
    			.defer(d3.json, "http://enjalot.github.io/wwsd/data/world/world-110m.geojson")
    			.defer(d3.csv, "data/no_women_gold.csv", function(d) { data.set(d.region, d.Gold_M); })
    			.await(ready);

			function ready(error, topo) {
    			if (error) throw error;

				svg.append("g")
					.attr("class", "countries")
					.selectAll("path")
					.data(topo.features)
					.enter().append("path")
				    .attr("fill", function (d){
				        d.total = data.get(d.properties.name) || -1;
				        return colorScale(d.total);
				    })
				    .attr("d", path);
				}
    };
    </script>
</head>
<body>
	<div id='rings'><canvas id="c1" width="380" height="220"></canvas></div>
	<h1>120 Years of Olympics History</h1>
	<hr>
	<p class="p1">The Olympic Games are considered the world's foremost sports competition with more than 200 nations participating. <br>In these visualizations we are going to explore the evolution of these sports, <br>since their beggining in Athens 1896, when the first games were held, till Rio 2016, the latest ones. <br>At first only there was only one Olympics game every 4 years, but then in 1924 winer games were separated as Winter Olympics games and were held two years after Summer Olympics Games</p>
	<div id='div1' class="box1" style="width:100%"></div>
	<p class='p1'>The games first begin in 1896. Then they were held every 4 years.<br>The games of 1916 were cancelled due to WWI <br>Then again the games of 1940 and 1944 were cancelled again due to WWII <br>The games of 1980 were held in Mascow. Also, in 1980 soviet union invaded Afghanistan. United states boycotted the games and some other countries joined the boycott as a protest against invasion of Afghanistan. Because of this very few countries participated in Olympics that year</p>
	<div id='div2' class="box1" style="width:100%"></div>
	<p class='p1'>During the First Olympics games only men participated but then women started to participated from the second games</p>
	<div id='div3' class="box1" style="width:100%"></div>
	<p class='p1'>Over the years the number of athletes incerased, both Male and Female, in Olympics games.</p>
	<div id="map1" class="box1" style="width:100%"></div>
	<p></p>
	<div id="map2" class="box1" style="width:100%"></div>
	<p></p>
	<div id="map3" class="box1" style="width:100%"></div>
	<p>This series shows the statistics of how we started olympics and where we are right now</p>
	<hr>

	<script type="text/javascript">
		d3.csv("data/participating_countries.csv", country_participation)
	    d3.csv("data/summer_athletes.csv", summer_athletes_draw)
	   	d3.csv("data/winter_athletes.csv", winter_athletes_draw)
	   	d3.csv("data/no_medal.csv", no_medal_map)
	   	d3.csv("data/no_men_gold.csv", no_gold_men_map)
	   	d3.csv("data/no_women_gold.csv", no_gold_women_map)
	</script>
  	<script>
    	var canvas = document.getElementById('c1').getContext('2d');
      	var radius = 50;

      	var circles = [
	        {
	          color:'blue',
	          x : 2*radius - radius/2,
	          y : 2*radius,
	          isTop: true
	        } , {
	          color:'black',
	          x : 4*radius,
	          y : 2*radius,
	          isTop: true
	        } , {
	          color:'red',
	          x : 6*radius + radius/2,
	          y : 2*radius,
	          isTop: true
	        } , {
	          color:'yellow',
	          x : 3*radius - radius/4,
	          y : 3*radius,
	          isTop: false
	        } , {
	          color:'green',
	          x : 5*radius + radius/4,
	          y : 3*radius,
	          isTop: false
	        }
      	];

      	function drawArc(canvas, color, x, y, start, end) {
        	if (color !== 'white') drawArc(canvas, 'white', x, y, start, end);

        	canvas.lineWidth = color === 'white' ? 16 : 10;
        	canvas.strokeStyle = color;

        	canvas.beginPath();
        	canvas.arc(x, y, radius, start - Math.PI/2, end - Math.PI/2, true);
        	canvas.stroke();
      	}

      	circles.forEach(function(circle){
        	drawArc(canvas, circle.color, circle.x, circle.y, 0, Math.PI*2);
      	});

      	circles.forEach(function(circle){
        	if (circle.isTop) {
        	   	drawArc(canvas, circle.color, circle.x, circle.y, Math.PI, Math.PI*2/3);
           		drawArc(canvas, circle.color, circle.x, circle.y, Math.PI*5/3, Math.PI*4/3);
        	} else {
           		drawArc(canvas, circle.color, circle.x, circle.y, 0, Math.PI/3);
           		drawArc(canvas, circle.color, circle.x, circle.y, Math.PI*2/3, Math.PI/3);
        	}
      	});
    </script>
</body>
</html>